<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:treeNodes="clr-namespace:ICSharpCode.ILSpy.TreeNodes;assembly=ProjectRover"
             xmlns:treeView="clr-namespace:ICSharpCode.ILSpyX.TreeView;assembly=ICSharpCode.ILSpyX"
             xmlns:converters="clr-namespace:ICSharpCode.ILSpy.Converters;assembly=ProjectRover"
             xmlns:vm="clr-namespace:ICSharpCode.ILSpy.AssemblyTree;assembly=ProjectRover"
             x:Class="ICSharpCode.ILSpy.Views.AssemblyListPane"
             x:DataType="vm:AssemblyTreeModel">
  <UserControl.Resources>
    <converters:NodeForegroundConverter x:Key="NodeForegroundConverter" />
  </UserControl.Resources>
  
  <Border Background="Transparent" BorderThickness="0">
    <TreeView Name="tree" 
              HorizontalAlignment="Stretch" 
              VerticalAlignment="Stretch" 
              SelectionMode="Single"
              ItemsSource="{Binding Root.Children}">
      <TreeView.Styles>
        <Style Selector="TreeViewItem" x:DataType="treeView:SharpTreeNode">
            <Setter Property="IsExpanded" Value="{Binding IsExpanded, Mode=TwoWay}" />
            <Setter Property="IsSelected" Value="{Binding IsSelected, Mode=TwoWay}" />
        </Style>
      </TreeView.Styles>
      <TreeView.ItemTemplate>
        <TreeDataTemplate DataType="treeView:SharpTreeNode" ItemsSource="{Binding ViewChildren}">
          <StackPanel Orientation="Horizontal" Background="Transparent">
              <Image Source="{Binding Icon}" Width="16" Height="16" Margin="0,0,5,0" />
              <TextBlock Text="{Binding Text}" 
                         VerticalAlignment="Center"
                         Foreground="{Binding ., Converter={StaticResource NodeForegroundConverter}}" />
          </StackPanel>
        </TreeDataTemplate>
      </TreeView.ItemTemplate>
    </TreeView>
  </Border>
</UserControl>
